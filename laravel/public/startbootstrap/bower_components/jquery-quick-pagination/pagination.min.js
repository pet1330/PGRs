(function($) {
	$.fn.quickPagination = function(options) {
		var defaults = {
			pageSize: 3,
			currentPage: 1,
			holder: null,
			pagerLocation: "after"
		};
		var options = $.extend(defaults, options);
		return this.each(function() {
			var selector = $(this);
			var pageCounter = 1;
			selector.wrap("<div class='simplePagerContainer'></div>");
			selector.parents(".simplePagerContainer").find("ul.pagination").remove();
			selector.children().each(function(i) {
				if (i < pageCounter * options.pageSize && i >= (pageCounter - 1) * options.pageSize) {
					$(this).addClass("simplePagerPage" + pageCounter);
				} else {
					$(this).addClass("simplePagerPage" + (pageCounter + 1));
					pageCounter++;
				}
			});
			selector.children().hide();
			selector.children(".simplePagerPage" + options.currentPage).show();
			if (pageCounter <= 1) {
				return;
			}
			var pageNav = "<div class='text-center'><ul class='pagination'>";
			for (i = 1; i <= pageCounter; i++) {
				if (i == options.currentPage) {
					pageNav += "<li class='active pagination" + i + "'><a rel='" + i + "' href='#'>" + i + "</a></li>";
				} else {
					pageNav += "<li class='pagination" + i + "'><a rel='" + i + "' href='#'>" + i + "</a></li>";
				}
			}
			pageNav += "</ul></div>";
			if (!options.holder) {
				switch (options.pagerLocation) {
					case "before":
					selector.before(pageNav);
					break;
					case "both":
					selector.before(pageNav);
					selector.after(pageNav);
					break;
					default:
					selector.after(pageNav);
				}
			} else {
				$(options.holder).append(pageNav);
			}
			selector.parent().find(".pagination a").click(function() {
				var clickedLink = $(this).attr("rel");
				options.currentPage = clickedLink;
				if (options.holder) {
					$(this).parent("li").parent("ul").parent(options.holder).find("li.active").removeClass("active");
					$(this).parent("li").parent("ul").parent(options.holder).find("a[rel='" + clickedLink + "']").parent("li").addClass("active");
				} else {
					$(this).parent("li").parent("ul").parent("div").parent(".simplePagerContainer").find("li.active").removeClass("active");
					$(this).parent("li").parent("ul").parent("div").parent(".simplePagerContainer").find("a[rel='" + clickedLink + "']").parent("li").addClass("active");
				}
				selector.children().hide();
				selector.find(".simplePagerPage" + clickedLink).show();
				return false;
			});
		});
}
})(jQuery);